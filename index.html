<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>팀 게임 진행 관리 시스템</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="dynamic-background"></div>
    <div class="background-overlay"></div>
    <img src="25_2logo.png" alt="로고" class="main-logo">

    <div class="container">
        <div class="header">
            <h1>게임 진행 관리 시스템</h1>
            <p>오전/오후 게임 세션을 위한 완벽한 진행 도구</p>
        </div>

        <!-- 게임 진행 상태 -->
        <div id="gameProgress" class="game-progress">
            <div class="progress-title">게임 진행 상황을 로딩 중...</div>
        </div>

        <div class="nav-buttons">
            <button class="nav-btn active" onclick="showSection('setup')">팀 설정</button>
            <button class="nav-btn" onclick="showSection('scoreboard')">점수판</button>
            <button class="nav-btn" onclick="showSection('results')">결과 발표</button>
            <button class="nav-btn" onclick="showSection('timer')">타이머</button>
            <button class="nav-btn" onclick="showSection('tournament')">토너먼트</button>
            <button class="nav-btn" onclick="showSection('words')">제시어</button>
            <button class="nav-btn" onclick="showSection('quiz')">퀴즈</button>
        </div>

        <!-- 팀 설정 섹션 -->
        <div id="setup" class="section active">
            <h2>📝 팀 설정</h2>
            <div class="team-setup">
                <div id="teamInputs">
                    <div class="team-input">
                        <input type="text" placeholder="팀 1 이름" id="team0">
                        <button class="remove-team-btn" onclick="removeTeam(0)">삭제</button>
                    </div>
                    <div class="team-input">
                        <input type="text" placeholder="팀 2 이름" id="team1">
                        <button class="remove-team-btn" onclick="removeTeam(1)">삭제</button>
                    </div>
                    <div class="team-input">
                        <input type="text" placeholder="팀 3 이름" id="team2">
                        <button class="remove-team-btn" onclick="removeTeam(2)">삭제</button>
                    </div>
                </div>
                <button class="add-team-btn" onclick="addTeam()">팀 추가</button>
                <button class="nav-btn" onclick="initializeTeams()" style="margin-left: 10px;">팀 설정 완료</button>
            </div>
        </div>

        <!-- 점수판 섹션 -->
        <div id="scoreboard" class="section">
            <h2>🏆 점수판</h2>
            <div id="scoreboardContainer" class="scoreboard">
                <!-- 팀들이 여기에 동적으로 추가됩니다 -->
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="nav-btn" onclick="resetAllScores()">전체 점수 초기화</button>
            </div>
        </div>

        <!-- 결과 발표 섹션 -->
        <div id="results" class="section">
            <h2>🎊 결과 발표</h2>
            <div class="results-info">
                <p>현재 순위를 확인하고 순위별로 발표할 수 있습니다.</p>
                <p>드럼롤 효과음과 함께 전체화면으로 순위가 발표됩니다.</p>
            </div>
            
            <div class="current-rankings">
                <div style="text-align: center; padding: 40px;">
                    <p style="font-size: 1.2rem; color: #666; margin-bottom: 20px;">
                        전체 순위 보기 버튼을 눌러 현재 등수를 확인하세요
                    </p>
                    <button class="nav-btn" onclick="showFullRankingsOverlay()" style="font-size: 1.2rem; padding: 15px 40px;">
                        📊 전체 순위 보기
                    </button>
                </div>
            </div>

            <div class="announcement-controls">
                <h3>🎤 순위 발표</h3>
                <div class="announcement-buttons">
                    <button class="announcement-btn gold" onclick="showRankingOverlay(1)">
                        <span class="medal">🥇</span>
                        <span class="rank-text">우승팀 발표</span>
                    </button>
                    <button class="announcement-btn silver" onclick="showRankingOverlay(2)">
                        <span class="medal">🥈</span>
                        <span class="rank-text">2등 발표</span>
                    </button>
                    <button class="announcement-btn bronze" onclick="showRankingOverlay(3)">
                        <span class="medal">🥉</span>
                        <span class="rank-text">3등 발표</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- 타이머 섹션 -->
        <div id="timer" class="section">
            <h2>⏰ 게임 타이머</h2>
            <div class="timer-section">
                <h3>현재 시간</h3>
                <div class="timer-display" id="timerDisplay">00:00</div>

                <div class="game-specific-timer">
                    <button class="game-preset" onclick="setGameTimer('body')">몸으로 말해요<br>(2분)</button>
                    <button class="game-preset" onclick="setGameTimer('balloon')">풍선 터뜨리기<br>(3분)</button>
                    <button class="game-preset" onclick="setGameTimer('quiz')">단합 퀴즈<br>(18분)</button>
                    <button class="game-preset" onclick="setGameTimer('card')">카드 뒤집기<br>(3분)</button>
                    <button class="game-preset" onclick="setGameTimer('drawing')">그림 그리기<br>(1분 20초)</button>
                    <button class="game-preset" onclick="setGameTimer('spoon')">오타마 릴레이<br>(2분)</button>
                    <button class="game-preset" onclick="setGameTimer('explanation')">게임 설명<br>(5분)</button>
                    <button class="game-preset" onclick="setGameTimer('break')">휴식시간<br>(3분)</button>
                </div>

                <div class="preset-times">
                    <button class="preset-btn" onclick="setTimer(10)">10초</button>
                    <button class="preset-btn" onclick="setTimer(20)">20초</button>
                    <button class="preset-btn" onclick="setTimer(40)">40초</button>
                    <button class="preset-btn" onclick="setTimer(60)">1분</button>
                    <button class="preset-btn" onclick="setTimer(120)">2분</button>
                    <button class="preset-btn" onclick="setTimer(180)">3분</button>
                    <button class="preset-btn" onclick="setTimer(300)">5분</button>
                </div>

                <div class="timer-controls">
                    <button class="timer-btn" onclick="startTimer()">시작</button>
                    <button class="timer-btn" onclick="pauseTimer()">일시정지</button>
                    <button class="timer-btn" onclick="resetTimer()">리셋</button>
                    <button class="timer-btn" onclick="addTime(10)">+10초</button>
                    <button class="timer-btn" onclick="subtractTime(10)">-10초</button>
                </div>

                <div class="sound-controls">
                    <button class="sound-btn" onclick="playSound('start')">시작 사운드</button>
                    <button class="sound-btn" onclick="playSound('end')">종료 사운드</button>
                    <button class="sound-btn" onclick="playSound('warning')">경고 사운드</button>
                </div>
            </div>
        </div>

        <!-- 토너먼트 섹션 -->
        <div id="tournament" class="section">
            <h2>🏟️ 토너먼트</h2>

            <div class="game-info">
                <div class="game-title">토너먼트 방식</div>
                <div class="game-description">
                    <strong>6팀 기준:</strong><br>
                    • 1라운드: 2팀씩 3경기 → 승자 3팀 진출<br>
                    • 결승전: 3팀이 동시에 경기하여 1,2,3등 결정<br><br>
                    <strong>점수:</strong> 점수판에서 수동으로 점수를 부여하세요.
                </div>
            </div>

            <div id="tournamentContainer">
                <div class="tournament-controls">
                    <button class="nav-btn" onclick="createTournament()">토너먼트 시작</button>
                    <p>팀을 먼저 설정한 후 토너먼트를 시작하세요.</p>
                </div>
            </div>
        </div>

        <!-- 제시어/그림 섹션 -->
        <div id="words" class="section">
            <h2>💬 제시어 & 그림 관리</h2>

            <div class="game-info">
                <div class="game-title">사용법</div>
                <div class="game-description">
                    <strong>제시어 게임:</strong> 6경기로 구성되며, 각 경기당 20개의 제시어가 제공됩니다.<br>
                    <strong>게임 진행:</strong> 2분 제한시간 동안 제시어를 맞추고 정답/스킵 버튼을 활용하세요.<br>
                    <strong>제시어 섞기:</strong> 매 게임 시작 시 해당 경기의 제시어 순서가 랜덤하게 섞입니다.<br>
                    <strong>전체 셔플:</strong> 아래 셔플 버튼으로 모든 제시어를 섞어서 6경기에 새롭게 분배할 수 있습니다.<br>
                    <strong>일본어 번역:</strong> 각 제시어마다 일본어 번역이 함께 제공됩니다.<br>
                    <strong>단축키:</strong> ESC 키로 게임을 종료할 수 있습니다.
                </div>
            </div>

            <div class="word-shuffle-controls">
                <h3>제시어 전체 셔플</h3>
                <div class="shuffle-description">
                    <p>현재 상태: <span id="shuffleStatus">기본 카테고리별 구성</span></p>
                    <p style="font-size: 0.9rem; color: #666; margin-top: 5px;">
                        • 기본: 1경기(동물), 2경기(교통수단), 3경기(스포츠용품), 4경기(전자기기), 5경기(음식), 6경기(생활용품)<br>
                        • 셔플: 모든 제시어를 섞어서 각 경기에 랜덤하게 20개씩 새로 배치
                    </p>
                </div>
                <div class="shuffle-buttons">
                    <button class="shuffle-btn" onclick="shuffleAllWords()">🎲 전체 셔플</button>
                    <button class="reset-btn" onclick="resetToOriginalWords()">🔄 기본으로 복원</button>
                </div>
            </div>

            <div class="word-game-controls">
                <h3>제시어 게임 시작</h3>
                <div class="game-selector">
                    <button class="game-btn" onclick="startWordGame(1)">1경기 시작</button>
                    <button class="game-btn" onclick="startWordGame(2)">2경기 시작</button>
                    <button class="game-btn" onclick="startWordGame(3)">3경기 시작</button>
                    <button class="game-btn" onclick="startWordGame(4)">4경기 시작</button>
                    <button class="game-btn" onclick="startWordGame(5)">5경기 시작</button>
                    <button class="game-btn" onclick="startWordGame(6)">6경기 시작</button>
                </div>
            </div>

            <div id="wordManagementContainer">
                <!-- 기존 제시어 관리 패널 -->
            </div>
        </div>

        <!-- 제시어 게임 전체화면 -->
        <div id="wordGameFullscreen" class="word-game-fullscreen" style="display: none;">
            <div class="word-game-container">
                <div class="word-game-header">
                    <h1 id="wordGameTitle">제시어 게임 - 1경기</h1>
                    <div class="word-game-progress">
                        <span id="currentWordIndex">1</span> / 20
                    </div>
                    <div class="word-game-timer">
                        <span id="wordGameTimer">02:00</span>
                    </div>
                    <button class="close-word-game" onclick="closeWordGame()">×</button>
                </div>

                <div class="word-game-content">
                    <div class="word-display-section">
                        <div class="korean-word" id="koreanWord">축구</div>
                        <div class="japanese-word" id="japaneseWord">サッカー</div>
                    </div>

                    <div class="word-game-score">
                        <div class="score-display">
                            정답 수: <span id="correctCounter">0</span>개
                        </div>
                    </div>

                    <div class="word-game-controls">
                        <button class="word-game-btn correct-btn" onclick="correctAnswer()">정답 ✓</button>
                        <button class="word-game-btn skip-btn" onclick="skipWord()">스킵 →</button>
                    </div>

                    <div class="word-game-navigation">
                        <button class="word-nav-btn" onclick="prevWordGame()">◀ 이전 경기</button>
                        <button class="word-nav-btn" onclick="goToWordGame(1)">1경기</button>
                        <button class="word-nav-btn" onclick="goToWordGame(2)">2경기</button>
                        <button class="word-nav-btn" onclick="goToWordGame(3)">3경기</button>
                        <button class="word-nav-btn" onclick="goToWordGame(4)">4경기</button>
                        <button class="word-nav-btn" onclick="goToWordGame(5)">5경기</button>
                        <button class="word-nav-btn" onclick="goToWordGame(6)">6경기</button>
                        <button class="word-nav-btn" onclick="nextWordGame()">다음 경기 ▶</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 제시어 게임 결과 화면 -->
        <div id="wordGameResult" class="word-game-result" style="display: none;">
            <div class="result-container">
                <h2>게임 종료!</h2>
                <div class="final-score">
                    <div class="score-text">맞춘 개수</div>
                    <div class="score-number" id="finalScore">0</div>
                    <div class="score-text">/ 20</div>
                </div>
                <div class="result-actions">
                    <button class="result-btn" onclick="restartWordGame()">다시 시작</button>
                    <button class="result-btn" onclick="closeWordGameResult()">닫기</button>
                </div>
            </div>
        </div>

        <!-- 퀴즈 섹션 -->
        <div id="quiz" class="section">
            <h2>🧠 단합 퀴즈</h2>
            <div class="quiz-controls">
                <button class="nav-btn" onclick="startQuizShow()">퀴즈쇼 시작</button>
                <button class="nav-btn" onclick="showQuizManagement()">퀴즈 관리</button>
                <button class="nav-btn" onclick="randomizeQuizOrder()" style="background: linear-gradient(45deg, #43e97b, #38f9d7);">기본 셔플 (1~3경기)</button>
                <button class="nav-btn" onclick="randomizeFinalQuizOrder()" style="background: linear-gradient(45deg, #ff6b6b, #ee5a24);">결승전 셔플 (4경기)</button>
                <button class="nav-btn" onclick="showSampleQuiz()">예시 문제 보기</button>
            </div>

            <div class="game-selector">
                <h3>경기별 퀴즈 시작</h3>
                <button class="game-btn" onclick="startSpecificGame(1)">1경기 시작</button>
                <button class="game-btn" onclick="startSpecificGame(2)">2경기 시작</button>
                <button class="game-btn" onclick="startSpecificGame(3)">3경기 시작</button>
                <button class="game-btn" onclick="startSpecificGame(4)">4경기 시작</button>
            </div>

            <div id="quizManagement" class="quiz-management" style="display: none;">
                <h3>퀴즈 문제 관리</h3>
                <div id="quizList" class="quiz-list">
                    <!-- 퀴즈 목록이 여기에 표시됩니다 -->
                </div>
            </div>
        </div>

        <!-- 퀴즈쇼 전체화면 -->
        <div id="quizShowFullscreen" class="quiz-fullscreen" style="display: none;">
            <div class="quiz-container">
                <div class="quiz-header">
                    <h1 id="quizTitle">단합 퀴즈</h1>
                    <div class="quiz-progress">
                        <span id="currentQuestion">1</span> / <span id="totalQuestions">10</span>
                    </div>
                    <button class="close-quiz" onclick="closeQuizShow()">×</button>
                </div>

                <div class="quiz-content">
                    <div class="question-section">
                        <h2 id="questionText">문제를 불러오는 중...</h2>
                    </div>

                    <div class="options-section">
                        <div class="option" id="optionA" onclick="selectOption('A')">
                            <span class="option-letter">A</span>
                            <span class="option-text">옵션 A</span>
                        </div>
                        <div class="option" id="optionB" onclick="selectOption('B')">
                            <span class="option-letter">B</span>
                            <span class="option-text">옵션 B</span>
                        </div>
                        <div class="option" id="optionC" onclick="selectOption('C')">
                            <span class="option-letter">C</span>
                            <span class="option-text">옵션 C</span>
                        </div>
                        <div class="option" id="optionD" onclick="selectOption('D')">
                            <span class="option-letter">D</span>
                            <span class="option-text">옵션 D</span>
                        </div>
                    </div>

                    <div class="hint-section" id="hintSection" style="display: none;">
                        <div class="hint-display">
                            <h3>💡 힌트</h3>
                            <div id="hintText"></div>
                        </div>
                    </div>

                    <div class="answer-section" id="answerSection" style="display: none;">
                        <div class="correct-answer">
                            <h3>정답: <span id="correctAnswerText"></span></h3>
                            <div id="explanationText"></div>
                        </div>
                    </div>

                    <div class="quiz-controls">
                        <button class="quiz-btn" id="showHintBtn" onclick="showHint()" style="display: none; background: linear-gradient(45deg, #FFA500, #FF8C00);">💡 힌트 보기</button>
                        <button class="quiz-btn" id="showAnswerBtn" onclick="showAnswer()">정답 확인</button>
                        <button class="quiz-btn" id="nextQuestionBtn" onclick="nextQuestion()" style="display: none;">다음
                            문제</button>
                        <button class="quiz-btn" id="prevQuestionBtn" onclick="prevQuestion()">이전 문제</button>
                    </div>

                    <div class="game-controls">
                        <button class="game-control-btn" onclick="prevGame()">◀ 이전 경기</button>
                        <button class="game-control-btn" onclick="goToGame(1)">1경기</button>
                        <button class="game-control-btn" onclick="goToGame(2)">2경기</button>
                        <button class="game-control-btn" onclick="goToGame(3)">3경기</button>
                        <button class="game-control-btn" onclick="goToGame(4)">4경기</button>
                        <button class="game-control-btn" onclick="nextGame()">다음 경기 ▶</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>

    <!-- 우승팀 발표 전체화면 오버레이 -->
    <div id="winnerOverlay" class="winner-overlay" style="display: none;">
        <div class="winner-overlay-inner">
            <div class="winner-text" id="winnerText">우승팀</div>
            <button class="winner-close" id="winnerCloseBtn" title="닫기(ESC)">×</button>
        </div>
        <!-- 드럼롤 효과음: 파일명에 공백이 포함되어 있어 정확히 동일하게 표기 -->
        <audio id="drumrollAudio" preload="auto">
            <source src="효과음    두구두구두구.mp3" type="audio/mpeg">
        </audio>
    </div>

    <!-- 전체 순위 표시 오버레이 -->
    <div id="rankingsOverlay" class="rankings-overlay" style="display: none;">
        <div class="rankings-overlay-inner">
            <h1 class="rankings-title">🏆 현재 순위 🏆</h1>
            <div class="rankings-fullscreen-container" id="rankingsFullscreenContainer">
                <!-- 순위가 여기에 동적으로 표시됩니다 -->
            </div>
            <button class="winner-close" id="rankingsCloseBtn" title="닫기(ESC)">×</button>
        </div>
    </div>
</body>

</html>